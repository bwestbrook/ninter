{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { Serializer } from '@airgap/beacon-core';\nimport { ExtensionMessageTarget, NetworkType } from '@airgap/beacon-types';\nimport { windowRef } from '@airgap/beacon-core';\nimport { getTzip10Link } from '../../utils/get-tzip10-link';\nimport { isAndroid, isIOS } from '../../utils/platform';\nimport { PostMessageTransport } from '@airgap/beacon-transport-postmessage';\nimport { desktopList, extensionList, iOSList, webList } from './wallet-lists';\n/**\n * Initialize with tezos wallets for backwards compatibility\n */\n\nlet localDesktopList = desktopList;\nlet localExtensionList = extensionList;\nlet localWebList = webList;\nlet localiOSList = iOSList;\nexport const getDesktopList = () => {\n  return localDesktopList;\n};\nexport const setDesktopList = desktopList => {\n  localDesktopList = desktopList;\n};\nexport const getExtensionList = () => {\n  return localExtensionList;\n};\nexport const setExtensionList = extensionList => {\n  localExtensionList = extensionList;\n};\nexport const getWebList = () => {\n  return localWebList;\n};\nexport const setWebList = webList => {\n  localWebList = webList;\n};\nexport const getiOSList = () => {\n  return localiOSList;\n};\nexport const setiOSList = iosList => {\n  localiOSList = iosList;\n};\nconst serializer = new Serializer();\nconst defaultExtensions = ['ookjlbkiijinhpmnjffcofjonbfbgaoc', 'gpfndedineagiepkpinficbcbbgjoenn' // Spire\n];\nexport var Platform;\n\n(function (Platform) {\n  Platform[Platform[\"DESKTOP\"] = 0] = \"DESKTOP\";\n  Platform[Platform[\"IOS\"] = 1] = \"IOS\";\n  Platform[Platform[\"ANDROID\"] = 2] = \"ANDROID\";\n})(Platform || (Platform = {}));\n\nexport var WalletType;\n\n(function (WalletType) {\n  WalletType[\"IOS\"] = \"ios\";\n  WalletType[\"ANDROID\"] = \"android\";\n  WalletType[\"EXTENSION\"] = \"extension\";\n  WalletType[\"DESKTOP\"] = \"desktop\";\n  WalletType[\"WEB\"] = \"web\";\n})(WalletType || (WalletType = {}));\n/**\n * @internalapi\n *\n */\n\n\nexport class Pairing {\n  static getPlatfrom() {\n    return __awaiter(this, void 0, void 0, function* () {\n      return isAndroid(window) ? Platform.ANDROID : isIOS(window) ? Platform.IOS : Platform.DESKTOP;\n    });\n  }\n\n  static getPairingInfo(pairingPayload, statusUpdateHandler, mobileWalletHandler, platform) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const activePlatform = platform !== null && platform !== void 0 ? platform : yield Pairing.getPlatfrom();\n      const pairingCode = pairingPayload.p2pSyncCode;\n      const postmessageSyncCode = pairingPayload.postmessageSyncCode;\n      const preferredNetwork = pairingPayload.preferredNetwork;\n\n      switch (activePlatform) {\n        case Platform.DESKTOP:\n          return Pairing.getDesktopPairingAlert(pairingCode, statusUpdateHandler, postmessageSyncCode, mobileWalletHandler, preferredNetwork);\n\n        case Platform.IOS:\n          return Pairing.getIOSPairingAlert(pairingCode, statusUpdateHandler, preferredNetwork);\n\n        case Platform.ANDROID:\n          return Pairing.getAndroidPairingAlert(pairingCode, statusUpdateHandler, preferredNetwork);\n\n        default:\n          throw new Error('platform unknown');\n      }\n    });\n  }\n\n  static getDesktopPairingAlert(pairingCode, statusUpdateHandler, postmessageSyncCode, mobileWalletHandler, network) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const availableExtensions = yield PostMessageTransport.getAvailableExtensions();\n      availableExtensions.forEach(ext => {\n        const index = defaultExtensions.indexOf(ext.id);\n\n        if (index >= 0) {\n          defaultExtensions.splice(index, 1);\n        }\n      });\n      const walletLists = [];\n\n      if (getExtensionList().length > 0) {\n        walletLists.push({\n          title: 'Browser Extensions',\n          type: WalletType.EXTENSION,\n          wallets: [...availableExtensions.map(app => {\n            var _a, _b, _c, _d, _e;\n\n            const ext = getExtensionList().find(extEl => extEl.id === app.id);\n            return {\n              key: (_a = ext === null || ext === void 0 ? void 0 : ext.key) !== null && _a !== void 0 ? _a : app.id,\n              name: (_b = app.name) !== null && _b !== void 0 ? _b : ext === null || ext === void 0 ? void 0 : ext.name,\n              logo: (_c = app.iconUrl) !== null && _c !== void 0 ? _c : ext === null || ext === void 0 ? void 0 : ext.logo,\n              shortName: (_d = app.shortName) !== null && _d !== void 0 ? _d : ext === null || ext === void 0 ? void 0 : ext.shortName,\n              color: (_e = app.color) !== null && _e !== void 0 ? _e : ext === null || ext === void 0 ? void 0 : ext.color,\n              enabled: true,\n              clicked: false,\n\n              clickHandler() {\n                return __awaiter(this, void 0, void 0, function* () {\n                  if (this.clicked) {\n                    return;\n                  }\n\n                  this.clicked = true;\n\n                  if (postmessageSyncCode) {\n                    const postmessageCode = yield serializer.serialize(yield postmessageSyncCode());\n                    const message = {\n                      target: ExtensionMessageTarget.EXTENSION,\n                      payload: postmessageCode,\n                      targetId: app.id\n                    }; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n                    windowRef.postMessage(message, windowRef.location.origin);\n                  }\n\n                  statusUpdateHandler(WalletType.EXTENSION, this);\n                });\n              }\n\n            };\n          }), ...getExtensionList().filter(app => defaultExtensions.some(extId => extId === app.id)).map(app => ({\n            key: app.key,\n            name: app.name,\n            shortName: app.shortName,\n            color: app.color,\n            logo: app.logo,\n            enabled: false,\n            clickHandler: () => {// Don't do anything\n            }\n          }))].sort((a, b) => a.key.localeCompare(b.key))\n        });\n      }\n\n      if (getDesktopList().length > 0) {\n        walletLists.push({\n          title: 'Desktop & Web Wallets',\n          type: WalletType.DESKTOP,\n          wallets: [...getDesktopList().map(app => ({\n            key: app.key,\n            name: app.name,\n            shortName: app.shortName,\n            color: app.color,\n            logo: app.logo,\n            enabled: true,\n            clicked: false,\n\n            clickHandler() {\n              return __awaiter(this, void 0, void 0, function* () {\n                if (this.clicked) {\n                  return;\n                }\n\n                this.clicked = true;\n                const code = yield serializer.serialize(yield pairingCode());\n                const link = getTzip10Link(app.deepLink, code);\n                window.open(link, '_blank');\n                statusUpdateHandler(WalletType.DESKTOP, this, true);\n              });\n            }\n\n          })), ...(yield Pairing.getWebList(pairingCode, statusUpdateHandler, network))].sort((a, b) => a.key.localeCompare(b.key))\n        });\n      }\n\n      if (getiOSList().length > 0) {\n        walletLists.push({\n          title: 'Mobile Wallets',\n          type: WalletType.IOS,\n          wallets: [...getiOSList().map(app => ({\n            key: app.key,\n            name: app.name,\n            shortName: app.shortName,\n            color: app.color,\n            logo: app.logo,\n            enabled: true,\n            clicked: false,\n\n            clickHandler() {\n              return __awaiter(this, void 0, void 0, function* () {\n                if (this.clicked) {\n                  return;\n                }\n\n                this.clicked = true;\n                const code = yield serializer.serialize(yield pairingCode());\n                mobileWalletHandler(code);\n                statusUpdateHandler(WalletType.IOS, this, true);\n              });\n            }\n\n          }))].sort((a, b) => a.key.localeCompare(b.key))\n        });\n      }\n\n      return {\n        walletLists,\n        buttons: []\n      };\n    });\n  }\n\n  static getIOSPairingAlert(pairingCode, statusUpdateHandler, network) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return {\n        walletLists: [{\n          title: 'Mobile Wallets',\n          type: WalletType.IOS,\n          wallets: getiOSList().map(app => ({\n            key: app.key,\n            name: app.name,\n            shortName: app.shortName,\n            color: app.color,\n            logo: app.logo,\n            enabled: true,\n            clicked: false,\n\n            clickHandler() {\n              var _a;\n\n              return __awaiter(this, void 0, void 0, function* () {\n                if (this.clicked) {\n                  return;\n                }\n\n                this.clicked = true;\n                const code = yield serializer.serialize(yield pairingCode());\n                const link = getTzip10Link((_a = app.deepLink) !== null && _a !== void 0 ? _a : app.universalLink, code); // iOS does not trigger deeplinks with `window.open(...)`. The only way is using a normal link. So we have to work around that.\n\n                const a = document.createElement('a');\n                a.setAttribute('href', link);\n                a.dispatchEvent(new MouseEvent('click', {\n                  view: window,\n                  bubbles: true,\n                  cancelable: true\n                }));\n                statusUpdateHandler(WalletType.IOS, this, true);\n              });\n            }\n\n          })).sort((a, b) => a.key.localeCompare(b.key))\n        }, {\n          title: 'Web Wallets',\n          type: WalletType.WEB,\n          wallets: [...(yield Pairing.getWebList(pairingCode, statusUpdateHandler, network))].sort((a, b) => a.key.localeCompare(b.key))\n        }],\n        buttons: []\n      };\n    });\n  }\n\n  static getAndroidPairingAlert(pairingCode, statusUpdateHandler, network) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return {\n        walletLists: [{\n          title: 'Web Wallets',\n          type: WalletType.WEB,\n          wallets: [...(yield Pairing.getWebList(pairingCode, statusUpdateHandler, network))].sort((a, b) => a.key.localeCompare(b.key))\n        }],\n        buttons: [{\n          title: 'Mobile Wallets',\n          text: 'Connect Wallet',\n          clickHandler: () => __awaiter(this, void 0, void 0, function* () {\n            const code = yield serializer.serialize(yield pairingCode());\n            const qrLink = getTzip10Link('tezos://', code);\n            window.open(qrLink, '_blank');\n            statusUpdateHandler(WalletType.ANDROID);\n          })\n        }]\n      };\n    });\n  }\n\n  static getWebList(pairingCode, statusUpdateHandler, network) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return getWebList().map(app => ({\n        key: app.key,\n        name: app.name,\n        shortName: app.shortName,\n        color: app.color,\n        logo: app.logo,\n        enabled: true,\n        clicked: false,\n\n        clickHandler() {\n          if (this.clicked) {\n            return;\n          }\n\n          this.clicked = true;\n          const newTab = window.open('', '_blank');\n          pairingCode().then(code => serializer.serialize(code)).then(code => {\n            var _a;\n\n            const link = getTzip10Link((_a = app.links[network]) !== null && _a !== void 0 ? _a : app.links[NetworkType.MAINNET], code);\n\n            if (newTab) {\n              newTab.location.href = link;\n            } else {\n              window.open(link, '_blank');\n            }\n\n            statusUpdateHandler(WalletType.WEB, this, true);\n          }).catch(error => {\n            // eslint-disable-next-line no-console\n            console.error(error);\n          });\n        }\n\n      })).sort((a, b) => a.key.localeCompare(b.key));\n    });\n  }\n\n}","map":{"version":3,"mappings":"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","names":["Serializer","ExtensionMessageTarget","NetworkType","windowRef","getTzip10Link","isAndroid","isIOS","PostMessageTransport","desktopList","extensionList","iOSList","webList","localDesktopList","localExtensionList","localWebList","localiOSList","getDesktopList","setDesktopList","getExtensionList","setExtensionList","getWebList","setWebList","getiOSList","setiOSList","iosList","serializer","defaultExtensions","Platform","WalletType","Pairing","getPlatfrom","window","ANDROID","IOS","DESKTOP","getPairingInfo","pairingPayload","statusUpdateHandler","mobileWalletHandler","platform","activePlatform","pairingCode","p2pSyncCode","postmessageSyncCode","preferredNetwork","getDesktopPairingAlert","getIOSPairingAlert","getAndroidPairingAlert","Error","network","availableExtensions","getAvailableExtensions","forEach","ext","index","indexOf","id","splice","walletLists","length","push","title","type","EXTENSION","wallets","map","app","find","extEl","key","_a","name","_b","logo","iconUrl","_c","shortName","_d","color","_e","enabled","clicked","clickHandler","postmessageCode","serialize","message","target","payload","targetId","postMessage","location","origin","filter","some","extId","sort","a","b","localeCompare","code","link","deepLink","open","buttons","universalLink","document","createElement","setAttribute","dispatchEvent","MouseEvent","view","bubbles","cancelable","WEB","text","__awaiter","qrLink","newTab","then","links","MAINNET","href","catch","error","console"],"sourceRoot":"","sources":["../../../../src/ui/alert/Pairing.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}