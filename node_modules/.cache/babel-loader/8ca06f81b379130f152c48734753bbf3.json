{"ast":null,"code":"/** PURE_IMPORTS_START _Observable,_scheduler_async,_util_isNumeric,_util_isScheduler PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { async } from '../scheduler/async';\nimport { isNumeric } from '../util/isNumeric';\nimport { isScheduler } from '../util/isScheduler';\nexport function timer(dueTime, periodOrScheduler, scheduler) {\n  if (dueTime === void 0) {\n    dueTime = 0;\n  }\n\n  var period = -1;\n\n  if (isNumeric(periodOrScheduler)) {\n    period = Number(periodOrScheduler) < 1 && 1 || Number(periodOrScheduler);\n  } else if (isScheduler(periodOrScheduler)) {\n    scheduler = periodOrScheduler;\n  }\n\n  if (!isScheduler(scheduler)) {\n    scheduler = async;\n  }\n\n  return new Observable(function (subscriber) {\n    var due = isNumeric(dueTime) ? dueTime : +dueTime - scheduler.now();\n    return scheduler.schedule(dispatch, due, {\n      index: 0,\n      period: period,\n      subscriber: subscriber\n    });\n  });\n}\n\nfunction dispatch(state) {\n  var index = state.index,\n      period = state.period,\n      subscriber = state.subscriber;\n  subscriber.next(index);\n\n  if (subscriber.closed) {\n    return;\n  } else if (period === -1) {\n    return subscriber.complete();\n  }\n\n  state.index = index + 1;\n  this.schedule(state, period);\n}","map":{"version":3,"mappings":"AAAA;AAEA,SAASA,UAAT,QAAsB,eAAtB;AACA,SAASC,KAAT,QAAoB,oBAApB;AACA,SAASC,SAAT,QAAsB,mBAAtB;AAqDA,SAAMC,WAAN,QAAsB,qBAAtB;OAAsB,2CAA0BC,SAA1B,EAA0B;EAG9C,IAAIC,OAAM,KAAM,MAAhB,EAAgB;IACZA,UAAU,CAAV;;;MAEHC;;eAAU,qBAAY;IACrBA,SAASC,MAAG,mBAAH,GAA4B,CAA5B,IAA4B,CAA5B,IAA4BA,yBAArC;EACD,OAEI,eAAY,mBAAZ,EAAwB;IAC3BH,SAAS,GAAGI,iBAAZ;EACD;;EAED,gBAAW,WAAX,EAAsB;IACpBJ,SAAS,GAAGH,KAAZ;;;aAEKD,WAAW,UAAUS,UAAV,EAAiB;IAEjC,OAAO,YAAU,SAAV,GACLJ,OADK,GAEJ,0BAFH;IAGC;MACJK,QADI;MACJJ,cADI;MACJG;IADI;EAUK;;;SAGJE,SAAUC,OAAO;MACnBF,QAAOE;MAAAN;MAAAG;YACR;;gBAAU,CAAMI,QAAO;IACtB;EACD,OAEI,IAACP,MAAQ,KAAK,EAAd,EAAmB;IACpB,OAACG,UAAgB,SAAhB,EAAD;EACL","names":["Observable","async","isNumeric","isScheduler","scheduler","dueTime","period","Number","periodOrScheduler","subscriber","index","dispatch","state","closed"],"sources":["../../../src/internal/observable/timer.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}