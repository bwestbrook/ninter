{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_util_isArray,_fromArray,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isArray } from '../util/isArray';\nimport { fromArray } from './fromArray';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function race() {\n  var observables = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    observables[_i] = arguments[_i];\n  }\n\n  if (observables.length === 1) {\n    if (isArray(observables[0])) {\n      observables = observables[0];\n    } else {\n      return observables[0];\n    }\n  }\n\n  return fromArray(observables, undefined).lift(new RaceOperator());\n}\n\nvar RaceOperator = /*@__PURE__*/function () {\n  function RaceOperator() {}\n\n  RaceOperator.prototype.call = function (subscriber, source) {\n    return source.subscribe(new RaceSubscriber(subscriber));\n  };\n\n  return RaceOperator;\n}();\n\nexport { RaceOperator };\n\nvar RaceSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(RaceSubscriber, _super);\n\n  function RaceSubscriber(destination) {\n    var _this = _super.call(this, destination) || this;\n\n    _this.hasFirst = false;\n    _this.observables = [];\n    _this.subscriptions = [];\n    return _this;\n  }\n\n  RaceSubscriber.prototype._next = function (observable) {\n    this.observables.push(observable);\n  };\n\n  RaceSubscriber.prototype._complete = function () {\n    var observables = this.observables;\n    var len = observables.length;\n\n    if (len === 0) {\n      this.destination.complete();\n    } else {\n      for (var i = 0; i < len && !this.hasFirst; i++) {\n        var observable = observables[i];\n        var subscription = subscribeToResult(this, observable, undefined, i);\n\n        if (this.subscriptions) {\n          this.subscriptions.push(subscription);\n        }\n\n        this.add(subscription);\n      }\n\n      this.observables = null;\n    }\n  };\n\n  RaceSubscriber.prototype.notifyNext = function (_outerValue, innerValue, outerIndex) {\n    if (!this.hasFirst) {\n      this.hasFirst = true;\n\n      for (var i = 0; i < this.subscriptions.length; i++) {\n        if (i !== outerIndex) {\n          var subscription = this.subscriptions[i];\n          subscription.unsubscribe();\n          this.remove(subscription);\n        }\n      }\n\n      this.subscriptions = null;\n    }\n\n    this.destination.next(innerValue);\n  };\n\n  return RaceSubscriber;\n}(OuterSubscriber);\n\nexport { RaceSubscriber };","map":{"version":3,"mappings":";AACA,OAAO,KAAEA,OAAT,MAAwB,OAAxB;AACA,SAASC,OAAT,QAAoB,iBAApB;AAKA,SAASC,SAAT,QAA0B,aAA1B;AAEA,SAASC,eAAT,QAA4B,oBAA5B;AAoDA,SAAMC,iBAAN,QAAoB,2BAApB;OAAwB;iBAAsC,GAAtC;;OAAA,mCAAsCC;;EAG5D;;MACEC,WAAW,CAACC,MAAZ,KAAuB,GAAG;QACxBN,mBAAc,GAAd,GAAyB;MAC1BK;WACC;MACD;IACF;EAED;;EACD;AAED;;IAAAE;EAIA,SAACA,YAAD,GAAC,CAHC;;cACS,WAAOC,OAAU,UAAIC,UAAJ,EAAmBC,MAAnB,EAAgC;IACzD;EACH;;EAJA,OAICH,YAJD;CAAA;;AAWA;;IAAuCI,wCAAqBC,MAArB,EAAqB;EAK1Db,kCAAYa,MAAZ;;WAAAD,eACEE,aAAM;IALA,kBAAoB,KAApB,CAA0B,IAA1B,EAA0BA,WAA1B,KAA0B,IAA1B;;IACAC,iBAAW,KAAX;IACAA,oBAAa,EAAb;;IAIP;EAES;;gBACH,WAAgBC,QAAC,UAAYC,UAAZ,EAAY;IACnC;EAES;;gBACF,WAAcC,YAAK,YAAY;IACrC,IAAMZ,WAAM,QAAYA,WAAxB;IAEA,IAAIa,GAAG,cAAQ,OAAf;;QACEA,QAAK;MACN;WACC;WACE,IAAMC,WAAUD,GAAV,IAAa,MAAYE,UAAGD;QAClC,IAAMH,aAAYX,WAAG,GAArB;QAEA,IAAIgB,YAAK,oBAAe,gCAAxB;;YACE,KAAKC,eAAc;UACpB;QACD;;QACD;MACD;;MACD;IACF;EAED;;gBAEY,WAAUC;QAClB,MAAKH,UAAW;MAEhB,KAAKA,QAAL,GAAgB,IAAhB;;WACE,IAAKD,OAAKA,SAAUG,aAAV,CAAYhB;YACpBa,MAAIK,YAAY;UAEhB,gBAAa,QAAWF,aAAX,CAAcH,CAAd,CAAb;UACAE,YAAY,YAAZ;UACD;QACF;MAED;;MACD;IAED;;IACD;EACH;;EApDuC;CAAA","names":["tslib_1","isArray","fromArray","OuterSubscriber","subscribeToResult","_i","observables","length","RaceOperator","call","subscriber","source","RaceSubscriber","_super","destination","_this","_next","observable","_complete","len","i","hasFirst","subscription","subscriptions","notifyNext","outerIndex"],"sources":["../../../src/internal/observable/race.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}