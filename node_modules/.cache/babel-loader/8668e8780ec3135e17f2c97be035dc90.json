{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { openAlert, closeAlerts, closeToast, openToast } from '@airgap/beacon-dapp';\nimport { BeaconErrorType } from '@airgap/beacon-types';\nimport { UnknownBeaconError, BeaconError, Logger // EncryptPayloadResponseOutput,\n// EncryptionOperation\n} from '@airgap/beacon-core';\nimport { shortenString } from './utils/shorten-string';\nimport { isMobile } from '@airgap/beacon-ui';\nconst logger = new Logger('BeaconEvents');\nconst SUCCESS_TIMER = 5 * 1000;\n/**\n * The different events that can be emitted by the beacon-sdk\n */\n\nexport var BeaconEvent;\n\n(function (BeaconEvent) {\n  BeaconEvent[\"PERMISSION_REQUEST_SENT\"] = \"PERMISSION_REQUEST_SENT\";\n  BeaconEvent[\"PERMISSION_REQUEST_SUCCESS\"] = \"PERMISSION_REQUEST_SUCCESS\";\n  BeaconEvent[\"PERMISSION_REQUEST_ERROR\"] = \"PERMISSION_REQUEST_ERROR\";\n  BeaconEvent[\"OPERATION_REQUEST_SENT\"] = \"OPERATION_REQUEST_SENT\";\n  BeaconEvent[\"OPERATION_REQUEST_SUCCESS\"] = \"OPERATION_REQUEST_SUCCESS\";\n  BeaconEvent[\"OPERATION_REQUEST_ERROR\"] = \"OPERATION_REQUEST_ERROR\";\n  BeaconEvent[\"SIGN_REQUEST_SENT\"] = \"SIGN_REQUEST_SENT\";\n  BeaconEvent[\"SIGN_REQUEST_SUCCESS\"] = \"SIGN_REQUEST_SUCCESS\";\n  BeaconEvent[\"SIGN_REQUEST_ERROR\"] = \"SIGN_REQUEST_ERROR\"; // TODO: ENCRYPTION\n  // ENCRYPT_REQUEST_SENT = 'ENCRYPT_REQUEST_SENT',\n  // ENCRYPT_REQUEST_SUCCESS = 'ENCRYPT_REQUEST_SUCCESS',\n  // ENCRYPT_REQUEST_ERROR = 'ENCRYPT_REQUEST_ERROR',\n\n  BeaconEvent[\"BROADCAST_REQUEST_SENT\"] = \"BROADCAST_REQUEST_SENT\";\n  BeaconEvent[\"BROADCAST_REQUEST_SUCCESS\"] = \"BROADCAST_REQUEST_SUCCESS\";\n  BeaconEvent[\"BROADCAST_REQUEST_ERROR\"] = \"BROADCAST_REQUEST_ERROR\";\n  BeaconEvent[\"ACKNOWLEDGE_RECEIVED\"] = \"ACKNOWLEDGE_RECEIVED\";\n  BeaconEvent[\"LOCAL_RATE_LIMIT_REACHED\"] = \"LOCAL_RATE_LIMIT_REACHED\";\n  BeaconEvent[\"NO_PERMISSIONS\"] = \"NO_PERMISSIONS\";\n  BeaconEvent[\"ACTIVE_ACCOUNT_SET\"] = \"ACTIVE_ACCOUNT_SET\";\n  BeaconEvent[\"ACTIVE_TRANSPORT_SET\"] = \"ACTIVE_TRANSPORT_SET\";\n  BeaconEvent[\"SHOW_PREPARE\"] = \"SHOW_PREPARE\";\n  BeaconEvent[\"HIDE_UI\"] = \"HIDE_UI\";\n  BeaconEvent[\"PAIR_INIT\"] = \"PAIR_INIT\";\n  BeaconEvent[\"PAIR_SUCCESS\"] = \"PAIR_SUCCESS\";\n  BeaconEvent[\"CHANNEL_CLOSED\"] = \"CHANNEL_CLOSED\";\n  BeaconEvent[\"INTERNAL_ERROR\"] = \"INTERNAL_ERROR\";\n  BeaconEvent[\"UNKNOWN\"] = \"UNKNOWN\";\n})(BeaconEvent || (BeaconEvent = {}));\n/**\n * Show a \"Request sent\" toast\n */\n\n\nconst showSentToast = data => __awaiter(void 0, void 0, void 0, function* () {\n  let openWalletAction;\n  const actions = [];\n\n  if (data.walletInfo.deeplink) {\n    if (data.walletInfo.type === 'web' || data.walletInfo.type === 'mobile' && isMobile(window) || data.walletInfo.type === 'desktop' && !isMobile(window)) {\n      const link = data.walletInfo.deeplink;\n\n      openWalletAction = () => __awaiter(void 0, void 0, void 0, function* () {\n        const a = document.createElement('a');\n        a.setAttribute('href', link);\n        a.setAttribute('target', '_blank');\n        a.dispatchEvent(new MouseEvent('click', {\n          view: window,\n          bubbles: true,\n          cancelable: true\n        }));\n      });\n    }\n  }\n\n  actions.push({\n    text: `No answer from your wallet received yet. Please make sure the wallet is open.`,\n    isBold: true\n  });\n  actions.push({\n    text: 'Did you make a mistake?',\n    actionText: 'Cancel Request',\n    actionCallback: () => __awaiter(void 0, void 0, void 0, function* () {\n      yield closeToast();\n    })\n  });\n  actions.push({\n    text: 'Wallet not receiving request?',\n    actionText: 'Reset Connection',\n    actionCallback: () => __awaiter(void 0, void 0, void 0, function* () {\n      yield closeToast(); // eslint-disable-next-line @typescript-eslint/unbound-method\n\n      const resetCallback = data.extraInfo.resetCallback;\n\n      if (resetCallback) {\n        logger.log('showSentToast', 'resetCallback invoked');\n        yield resetCallback();\n      }\n    })\n  });\n  openToast({\n    body: `Request sent to\\u00A0 {{wallet}}`,\n    walletInfo: data.walletInfo,\n    state: 'loading',\n    actions,\n    openWalletAction\n  }).catch(toastError => console.error(toastError));\n});\n\nconst showAcknowledgedToast = data => __awaiter(void 0, void 0, void 0, function* () {\n  openToast({\n    body: 'Awaiting confirmation in\\u00A0 {{wallet}}',\n    state: 'acknowledge',\n    walletInfo: data.walletInfo\n  }).catch(toastError => console.error(toastError));\n});\n\nconst showPrepare = data => __awaiter(void 0, void 0, void 0, function* () {\n  const text = data.walletInfo ? `Preparing Request for\\u00A0 {{wallet}}...` : 'Preparing Request...';\n  openToast({\n    body: text,\n    state: 'prepare',\n    walletInfo: data.walletInfo\n  }).catch(toastError => console.error(toastError));\n});\n\nconst hideUI = elements => __awaiter(void 0, void 0, void 0, function* () {\n  if (elements) {\n    if (elements.includes('alert')) {\n      closeAlerts();\n    }\n\n    if (elements.includes('toast')) {\n      closeToast();\n    }\n  } else {\n    closeToast();\n  }\n});\n/**\n * Show a \"No Permission\" alert\n */\n\n\nconst showNoPermissionAlert = () => __awaiter(void 0, void 0, void 0, function* () {\n  yield openAlert({\n    title: 'No Permission',\n    body: 'Please allow the wallet to handle this type of request.'\n  });\n});\n/**\n * Show an error toast\n *\n * @param beaconError The beacon error\n */\n\n\nconst showErrorToast = (response, buttons) => __awaiter(void 0, void 0, void 0, function* () {\n  const error = response.errorResponse.errorType ? BeaconError.getError(response.errorResponse.errorType, response.errorResponse.errorData) : new UnknownBeaconError();\n  const actions = [{\n    text: error.title,\n    isBold: true\n  }, {\n    text: error.description\n  }];\n\n  if (response.errorResponse.errorType === BeaconErrorType.TRANSACTION_INVALID_ERROR && response.errorResponse.errorData) {\n    actions.push({\n      text: '',\n      actionText: 'Show Details',\n      actionCallback: () => __awaiter(void 0, void 0, void 0, function* () {\n        yield closeToast();\n        yield openAlert({\n          title: error.title,\n          // eslint-disable-next-line @typescript-eslint/unbound-method\n          body: error.fullDescription.description,\n          data: error.fullDescription.data,\n          buttons\n        });\n      })\n    });\n  }\n\n  yield openToast({\n    body: `{{wallet}}\\u00A0 has returned an error`,\n    timer: response.errorResponse.errorType === BeaconErrorType.ABORTED_ERROR ? SUCCESS_TIMER : undefined,\n    state: 'finished',\n    walletInfo: response.walletInfo,\n    actions\n  });\n});\n/**\n * Show a rate limit reached toast\n */\n\n\nconst showRateLimitReached = () => __awaiter(void 0, void 0, void 0, function* () {\n  openAlert({\n    title: 'Error',\n    body: 'Rate limit reached. Please slow down',\n    buttons: [{\n      text: 'Done',\n      style: 'outline'\n    }],\n    timer: 3000\n  }).catch(toastError => console.error(toastError));\n});\n/**\n * Show a \"connection successful\" alert for 1.5 seconds\n */\n\n\nconst showExtensionConnectedAlert = () => __awaiter(void 0, void 0, void 0, function* () {\n  yield closeAlerts();\n});\n/**\n * Show a \"channel closed\" alert for 1.5 seconds\n */\n\n\nconst showChannelClosedAlert = () => __awaiter(void 0, void 0, void 0, function* () {\n  yield openAlert({\n    title: 'Channel closed',\n    body: `Your peer has closed the connection.`,\n    buttons: [{\n      text: 'Done',\n      style: 'outline'\n    }],\n    timer: 1500\n  });\n});\n\nconst showInternalErrorAlert = data => __awaiter(void 0, void 0, void 0, function* () {\n  var _a;\n\n  const buttons = [...((_a = data.buttons) !== null && _a !== void 0 ? _a : [])];\n  buttons.push({\n    text: 'Done',\n    style: 'outline'\n  });\n  const alertConfig = {\n    title: 'Internal Error',\n    body: data.text,\n    buttons\n  };\n  yield openAlert(alertConfig);\n});\n/**\n * Show a connect alert with QR code\n *\n * @param data The data that is emitted by the PAIR_INIT event\n */\n\n\nconst showPairAlert = data => __awaiter(void 0, void 0, void 0, function* () {\n  const alertConfig = {\n    title: 'Choose your preferred wallet',\n    body: `<p></p>`,\n    pairingPayload: {\n      p2pSyncCode: data.p2pPeerInfo,\n      postmessageSyncCode: data.postmessagePeerInfo,\n      preferredNetwork: data.preferredNetwork\n    },\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    closeButtonCallback: data.abortedHandler,\n    disclaimerText: data.disclaimerText\n  };\n  yield openAlert(alertConfig);\n});\n/**\n * Show a \"Permission Granted\" alert\n *\n * @param data The data that is emitted by the PERMISSION_REQUEST_SUCCESS event\n */\n\n\nconst showPermissionSuccessAlert = data => __awaiter(void 0, void 0, void 0, function* () {\n  const {\n    output\n  } = data;\n  yield openToast({\n    body: `{{wallet}}\\u00A0 has granted permission`,\n    timer: SUCCESS_TIMER,\n    walletInfo: data.walletInfo,\n    state: 'finished',\n    actions: [{\n      text: 'Address',\n      actionText: shortenString(output.address),\n      isBold: true\n    }, {\n      text: 'Network',\n      actionText: `${output.network.type}`\n    }, {\n      text: 'Permissions',\n      actionText: output.scopes.join(', ')\n    }]\n  });\n});\n/**\n * Show an \"Operation Broadcasted\" alert\n *\n * @param data The data that is emitted by the OPERATION_REQUEST_SUCCESS event\n */\n\n\nconst showOperationSuccessAlert = data => __awaiter(void 0, void 0, void 0, function* () {\n  const {\n    account,\n    output,\n    blockExplorer\n  } = data;\n  yield openToast({\n    body: `{{wallet}}\\u00A0 successfully submitted operation`,\n    timer: SUCCESS_TIMER,\n    state: 'finished',\n    walletInfo: data.walletInfo,\n    actions: [{\n      text: shortenString(output.transactionHash),\n      isBold: true,\n      actionText: `Open Blockexplorer`,\n      actionLogo: 'external',\n      actionCallback: () => __awaiter(void 0, void 0, void 0, function* () {\n        const link = yield blockExplorer.getTransactionLink(output.transactionHash, account.network);\n        window.open(link, '_blank');\n        yield closeToast();\n      })\n    }]\n  });\n});\n/**\n * Show a \"Transaction Signed\" alert\n *\n * @param data The data that is emitted by the SIGN_REQUEST_SUCCESS event\n */\n\n\nconst showSignSuccessAlert = data => __awaiter(void 0, void 0, void 0, function* () {\n  const output = data.output;\n  yield openToast({\n    body: `{{wallet}}\\u00A0 successfully signed payload`,\n    timer: SUCCESS_TIMER,\n    state: 'finished',\n    walletInfo: data.walletInfo,\n    actions: [{\n      text: `Signature: ${shortenString(output.signature)}`,\n      actionText: 'Copy to clipboard',\n      actionCallback: () => __awaiter(void 0, void 0, void 0, function* () {\n        navigator.clipboard.writeText(output.signature).then(() => {\n          logger.log('showSignSuccessAlert', 'Copying to clipboard was successful!');\n        }, err => {\n          logger.error('showSignSuccessAlert', 'Could not copy text to clipboard: ', err);\n        });\n        yield closeToast();\n      })\n    }]\n  });\n});\n/**\n * Show a \"Transaction Signed\" alert\n *\n * @param data The data that is emitted by the ENCRYPT_REQUEST_SUCCESS event\n */\n// TODO: ENCRYPTION\n// const showEncryptSuccessAlert = async (\n//   data: BeaconEventType[BeaconEvent.ENCRYPT_REQUEST_SUCCESS]\n// ): Promise<void> => {\n//   const output = data.output\n//   await openToast({\n//     body: `{{wallet}}\\u00A0 successfully ${\n//       data.output.cryptoOperation === EncryptionOperation.ENCRYPT ? 'encrypted' : 'decrypted'\n//     } payload`,\n//     timer: SUCCESS_TIMER,\n//     state: 'finished',\n//     walletInfo: data.walletInfo,\n//     actions: [\n//       {\n//         text: `Payload: <strong>${shortenString(output.payload)}</strong>`,\n//         actionText: 'Copy to clipboard',\n//         actionCallback: async (): Promise<void> => {\n//           navigator.clipboard.writeText(output.payload).then(\n//             () => {\n//               logger.log('showSignSuccessAlert', 'Copying to clipboard was successful!')\n//             },\n//             (err) => {\n//               logger.error('showSignSuccessAlert', 'Could not copy text to clipboard: ', err)\n//             }\n//           )\n//           await closeToast()\n//         }\n//       }\n//     ]\n//   })\n// }\n\n/**\n * Show a \"Broadcasted\" alert\n *\n * @param data The data that is emitted by the BROADCAST_REQUEST_SUCCESS event\n */\n\n\nconst showBroadcastSuccessAlert = data => __awaiter(void 0, void 0, void 0, function* () {\n  const {\n    network,\n    output,\n    blockExplorer\n  } = data;\n  yield openToast({\n    body: `{{wallet}}\\u00A0 successfully injected operation`,\n    timer: SUCCESS_TIMER,\n    state: 'finished',\n    walletInfo: data.walletInfo,\n    actions: [{\n      text: shortenString(output.transactionHash),\n      isBold: true,\n      actionText: `Open Blockexplorer`,\n      actionLogo: 'external',\n      actionCallback: () => __awaiter(void 0, void 0, void 0, function* () {\n        const link = yield blockExplorer.getTransactionLink(output.transactionHash, network);\n        window.open(link, '_blank');\n        yield closeToast();\n      })\n    }]\n  });\n});\n\nconst emptyHandler = () => () => __awaiter(void 0, void 0, void 0, function* () {//\n});\n/**\n * The default event handlers\n */\n\n\nexport const defaultEventCallbacks = {\n  [BeaconEvent.PERMISSION_REQUEST_SENT]: showSentToast,\n  [BeaconEvent.PERMISSION_REQUEST_SUCCESS]: showPermissionSuccessAlert,\n  [BeaconEvent.PERMISSION_REQUEST_ERROR]: showErrorToast,\n  [BeaconEvent.OPERATION_REQUEST_SENT]: showSentToast,\n  [BeaconEvent.OPERATION_REQUEST_SUCCESS]: showOperationSuccessAlert,\n  [BeaconEvent.OPERATION_REQUEST_ERROR]: showErrorToast,\n  [BeaconEvent.SIGN_REQUEST_SENT]: showSentToast,\n  [BeaconEvent.SIGN_REQUEST_SUCCESS]: showSignSuccessAlert,\n  [BeaconEvent.SIGN_REQUEST_ERROR]: showErrorToast,\n  // TODO: ENCRYPTION\n  // [BeaconEvent.ENCRYPT_REQUEST_SENT]: showSentToast,\n  // [BeaconEvent.ENCRYPT_REQUEST_SUCCESS]: showEncryptSuccessAlert,\n  // [BeaconEvent.ENCRYPT_REQUEST_ERROR]: showErrorToast,\n  [BeaconEvent.BROADCAST_REQUEST_SENT]: showSentToast,\n  [BeaconEvent.BROADCAST_REQUEST_SUCCESS]: showBroadcastSuccessAlert,\n  [BeaconEvent.BROADCAST_REQUEST_ERROR]: showErrorToast,\n  [BeaconEvent.ACKNOWLEDGE_RECEIVED]: showAcknowledgedToast,\n  [BeaconEvent.LOCAL_RATE_LIMIT_REACHED]: showRateLimitReached,\n  [BeaconEvent.NO_PERMISSIONS]: showNoPermissionAlert,\n  [BeaconEvent.ACTIVE_ACCOUNT_SET]: emptyHandler(),\n  [BeaconEvent.ACTIVE_TRANSPORT_SET]: emptyHandler(),\n  [BeaconEvent.SHOW_PREPARE]: showPrepare,\n  [BeaconEvent.HIDE_UI]: hideUI,\n  [BeaconEvent.PAIR_INIT]: showPairAlert,\n  [BeaconEvent.PAIR_SUCCESS]: showExtensionConnectedAlert,\n  [BeaconEvent.CHANNEL_CLOSED]: showChannelClosedAlert,\n  [BeaconEvent.INTERNAL_ERROR]: showInternalErrorAlert,\n  [BeaconEvent.UNKNOWN]: emptyHandler()\n};\n/**\n * @internalapi\n *\n * Handles beacon events\n */\n\nexport class BeaconEventHandler {\n  constructor(eventsToOverride = {}, overrideAll) {\n    this.callbackMap = {\n      [BeaconEvent.PERMISSION_REQUEST_SENT]: [defaultEventCallbacks.PERMISSION_REQUEST_SENT],\n      [BeaconEvent.PERMISSION_REQUEST_SUCCESS]: [defaultEventCallbacks.PERMISSION_REQUEST_SUCCESS],\n      [BeaconEvent.PERMISSION_REQUEST_ERROR]: [defaultEventCallbacks.PERMISSION_REQUEST_ERROR],\n      [BeaconEvent.OPERATION_REQUEST_SENT]: [defaultEventCallbacks.OPERATION_REQUEST_SENT],\n      [BeaconEvent.OPERATION_REQUEST_SUCCESS]: [defaultEventCallbacks.OPERATION_REQUEST_SUCCESS],\n      [BeaconEvent.OPERATION_REQUEST_ERROR]: [defaultEventCallbacks.OPERATION_REQUEST_ERROR],\n      [BeaconEvent.SIGN_REQUEST_SENT]: [defaultEventCallbacks.SIGN_REQUEST_SENT],\n      [BeaconEvent.SIGN_REQUEST_SUCCESS]: [defaultEventCallbacks.SIGN_REQUEST_SUCCESS],\n      [BeaconEvent.SIGN_REQUEST_ERROR]: [defaultEventCallbacks.SIGN_REQUEST_ERROR],\n      // TODO: ENCRYPTION\n      // [BeaconEvent.ENCRYPT_REQUEST_SENT]: [defaultEventCallbacks.ENCRYPT_REQUEST_SENT],\n      // [BeaconEvent.ENCRYPT_REQUEST_SUCCESS]: [defaultEventCallbacks.ENCRYPT_REQUEST_SUCCESS],\n      // [BeaconEvent.ENCRYPT_REQUEST_ERROR]: [defaultEventCallbacks.ENCRYPT_REQUEST_ERROR],\n      [BeaconEvent.BROADCAST_REQUEST_SENT]: [defaultEventCallbacks.BROADCAST_REQUEST_SENT],\n      [BeaconEvent.BROADCAST_REQUEST_SUCCESS]: [defaultEventCallbacks.BROADCAST_REQUEST_SUCCESS],\n      [BeaconEvent.BROADCAST_REQUEST_ERROR]: [defaultEventCallbacks.BROADCAST_REQUEST_ERROR],\n      [BeaconEvent.ACKNOWLEDGE_RECEIVED]: [defaultEventCallbacks.ACKNOWLEDGE_RECEIVED],\n      [BeaconEvent.LOCAL_RATE_LIMIT_REACHED]: [defaultEventCallbacks.LOCAL_RATE_LIMIT_REACHED],\n      [BeaconEvent.NO_PERMISSIONS]: [defaultEventCallbacks.NO_PERMISSIONS],\n      [BeaconEvent.ACTIVE_ACCOUNT_SET]: [defaultEventCallbacks.ACTIVE_ACCOUNT_SET],\n      [BeaconEvent.ACTIVE_TRANSPORT_SET]: [defaultEventCallbacks.ACTIVE_TRANSPORT_SET],\n      [BeaconEvent.SHOW_PREPARE]: [defaultEventCallbacks.SHOW_PREPARE],\n      [BeaconEvent.HIDE_UI]: [defaultEventCallbacks.HIDE_UI],\n      [BeaconEvent.PAIR_INIT]: [defaultEventCallbacks.PAIR_INIT],\n      [BeaconEvent.PAIR_SUCCESS]: [defaultEventCallbacks.PAIR_SUCCESS],\n      [BeaconEvent.CHANNEL_CLOSED]: [defaultEventCallbacks.CHANNEL_CLOSED],\n      [BeaconEvent.INTERNAL_ERROR]: [defaultEventCallbacks.INTERNAL_ERROR],\n      [BeaconEvent.UNKNOWN]: [defaultEventCallbacks.UNKNOWN]\n    };\n\n    if (overrideAll) {\n      this.setAllHandlers();\n    }\n\n    this.overrideDefaults(eventsToOverride);\n  }\n  /**\n   * A method to subscribe to a specific beacon event and register a callback\n   *\n   * @param event The event being emitted\n   * @param eventCallback The callback that will be invoked\n   */\n\n\n  on(event, eventCallback) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const listeners = this.callbackMap[event] || [];\n      listeners.push(eventCallback);\n      this.callbackMap[event] = listeners;\n    });\n  }\n  /**\n   * Emit a beacon event\n   *\n   * @param event The event being emitted\n   * @param data The data to be emit\n   */\n\n\n  emit(event, data, eventCallback) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const listeners = this.callbackMap[event];\n\n      if (listeners && listeners.length > 0) {\n        listeners.forEach(listener => __awaiter(this, void 0, void 0, function* () {\n          try {\n            yield listener(data, eventCallback);\n          } catch (listenerError) {\n            logger.error(`error handling event ${event}`, listenerError);\n          }\n        }));\n      }\n    });\n  }\n  /**\n   * Override beacon event default callbacks. This can be used to disable default alert/toast behaviour\n   *\n   * @param eventsToOverride An object with the events to override\n   */\n\n\n  overrideDefaults(eventsToOverride) {\n    Object.keys(eventsToOverride).forEach(untypedEvent => {\n      const eventType = untypedEvent;\n      const event = eventsToOverride[eventType];\n\n      if (event) {\n        this.callbackMap[eventType] = [event.handler];\n      }\n    });\n  }\n  /**\n   * Set all event callbacks to a specific handler.\n   */\n\n\n  setAllHandlers(handler) {\n    Object.keys(this.callbackMap).forEach(untypedEvent => {\n      const eventType = untypedEvent;\n      this.callbackMap[eventType] = [];\n\n      if (handler) {\n        this.callbackMap[eventType].push(handler);\n      } else {\n        this.callbackMap[eventType].push((...data) => {\n          logger.log(untypedEvent, ...data);\n        });\n      }\n    });\n  }\n\n}","map":{"version":3,"mappings":"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","names":["openAlert","closeAlerts","closeToast","openToast","BeaconErrorType","UnknownBeaconError","BeaconError","Logger","shortenString","isMobile","logger","SUCCESS_TIMER","BeaconEvent","showSentToast","data","__awaiter","openWalletAction","actions","walletInfo","deeplink","type","window","link","a","document","createElement","setAttribute","dispatchEvent","MouseEvent","view","bubbles","cancelable","push","text","isBold","actionText","actionCallback","resetCallback","extraInfo","log","body","state","catch","toastError","console","error","showAcknowledgedToast","showPrepare","hideUI","elements","includes","showNoPermissionAlert","title","showErrorToast","response","buttons","errorResponse","errorType","getError","errorData","description","TRANSACTION_INVALID_ERROR","fullDescription","timer","ABORTED_ERROR","undefined","showRateLimitReached","style","showExtensionConnectedAlert","showChannelClosedAlert","showInternalErrorAlert","_a","alertConfig","showPairAlert","pairingPayload","p2pSyncCode","p2pPeerInfo","postmessageSyncCode","postmessagePeerInfo","preferredNetwork","closeButtonCallback","abortedHandler","disclaimerText","showPermissionSuccessAlert","output","address","network","scopes","join","showOperationSuccessAlert","account","blockExplorer","transactionHash","actionLogo","getTransactionLink","open","showSignSuccessAlert","signature","navigator","clipboard","writeText","then","err","showBroadcastSuccessAlert","emptyHandler","defaultEventCallbacks","PERMISSION_REQUEST_SENT","PERMISSION_REQUEST_SUCCESS","PERMISSION_REQUEST_ERROR","OPERATION_REQUEST_SENT","OPERATION_REQUEST_SUCCESS","OPERATION_REQUEST_ERROR","SIGN_REQUEST_SENT","SIGN_REQUEST_SUCCESS","SIGN_REQUEST_ERROR","BROADCAST_REQUEST_SENT","BROADCAST_REQUEST_SUCCESS","BROADCAST_REQUEST_ERROR","ACKNOWLEDGE_RECEIVED","LOCAL_RATE_LIMIT_REACHED","NO_PERMISSIONS","ACTIVE_ACCOUNT_SET","ACTIVE_TRANSPORT_SET","SHOW_PREPARE","HIDE_UI","PAIR_INIT","PAIR_SUCCESS","CHANNEL_CLOSED","INTERNAL_ERROR","UNKNOWN","BeaconEventHandler","constructor","eventsToOverride","overrideAll","setAllHandlers","overrideDefaults","on","event","eventCallback","listeners","callbackMap","emit","length","forEach","listener","listenerError","Object","keys","untypedEvent","eventType","handler"],"sourceRoot":"","sources":["../../src/events.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}