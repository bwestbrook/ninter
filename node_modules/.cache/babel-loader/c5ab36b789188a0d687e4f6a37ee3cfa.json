{"ast":null,"code":"/** PURE_IMPORTS_START tslib,_Subscriber,_util_ArgumentOutOfRangeError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { ArgumentOutOfRangeError } from '../util/ArgumentOutOfRangeError';\nexport function skipLast(count) {\n  return function (source) {\n    return source.lift(new SkipLastOperator(count));\n  };\n}\n\nvar SkipLastOperator = /*@__PURE__*/function () {\n  function SkipLastOperator(_skipCount) {\n    this._skipCount = _skipCount;\n\n    if (this._skipCount < 0) {\n      throw new ArgumentOutOfRangeError();\n    }\n  }\n\n  SkipLastOperator.prototype.call = function (subscriber, source) {\n    if (this._skipCount === 0) {\n      return source.subscribe(new Subscriber(subscriber));\n    } else {\n      return source.subscribe(new SkipLastSubscriber(subscriber, this._skipCount));\n    }\n  };\n\n  return SkipLastOperator;\n}();\n\nvar SkipLastSubscriber = /*@__PURE__*/function (_super) {\n  tslib_1.__extends(SkipLastSubscriber, _super);\n\n  function SkipLastSubscriber(destination, _skipCount) {\n    var _this = _super.call(this, destination) || this;\n\n    _this._skipCount = _skipCount;\n    _this._count = 0;\n    _this._ring = new Array(_skipCount);\n    return _this;\n  }\n\n  SkipLastSubscriber.prototype._next = function (value) {\n    var skipCount = this._skipCount;\n    var count = this._count++;\n\n    if (count < skipCount) {\n      this._ring[count] = value;\n    } else {\n      var currentIndex = count % skipCount;\n      var ring = this._ring;\n      var oldValue = ring[currentIndex];\n      ring[currentIndex] = value;\n      this.destination.next(oldValue);\n    }\n  };\n\n  return SkipLastSubscriber;\n}(Subscriber);","map":{"version":3,"mappings":";AACA,OAAO,KAAEA,OAAT,MAAqB,OAArB;AACA,SAASC,UAAT,QAAS,eAAT;AA0CA,SAAMC,uBAAN,QAAyC,iCAAzC;OACE,SAAOC,QAAP,CAAQC,KAAR,EAAkC;EACnC;IAAA;EAAA;AAED;;IACEC,gCAAoB,YAAkB;WAAlBA,6BAAkB;IACpC,KAAIC,UAAJ,GAASA,UAAT;;QACE,kBAAU;MACX;IACF;EAED;;kBACW,WAAUC,OAAQ;QAGzB,oBAAc,GAAS;MACxB;WACC;MACD;IACF;EACH;;EAhBA,OAgBCF,gBAhBD;AAuBA,CAtBsB;;IAsBcG,4CAAaC,MAAb,EAAa;EAI/CT,sCAAYS,MAAZ;;WAAAD,mBACEE,aAAMJ,YAAY;IAD4B,kBAAU,CAAVC,WAAkBG,WAAlB,KAAkB,IAAlB;;IAFxCC,mBAAmBL,UAAnB;IAINK,KAAI,CAACC,MAAL,GAAa,CAAb;;IACD;EAES;;oBACO,WAAQC,QAAW;IAClC,IAAMC,SAAQ,GAAI,KAACR,UAAnB;IAEA,IAAIF,KAAK,GAAG,aAAZ;;QACEA,KAAK,cAAY;MAClB;WACC;MACA,IAAMW,YAAY,QAAM,YAAxB;MACA,IAAMC,YAAWC,KAAjB;MAEA,IAAIC,QAAC,OAAa,cAAlB;MACAF,IAAI,CAACD,YAAD,CAAJ,GAAqBI,KAArB;MACD;IACF;EACH;;EAxBoC;CAAA","names":["tslib_1","Subscriber","ArgumentOutOfRangeError","skipLast","count","SkipLastOperator","_skipCount","call","SkipLastSubscriber","_super","destination","_this","_count","_next","skipCount","currentIndex","ring","_ring","oldValue","value"],"sources":["../../../src/internal/operators/skipLast.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}