{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport { Serializer, Logger, windowRef } from '@airgap/beacon-core';\nimport { generateGUID } from '@airgap/beacon-utils';\nimport { isAndroid, isIOS } from '../../utils/platform';\nimport { getQrData } from '../../utils/qr';\nimport { getTzip10Link } from '../../utils/get-tzip10-link';\nimport { closeAlerts } from './Alert';\nimport { Pairing, WalletType } from './Pairing';\nimport { createSanitizedElement, createSVGElement, createSVGPathElement, removeAllChildren } from '../../utils/html-elements';\nconst logger = new Logger('Alert');\nconst serializer = new Serializer();\nexport const preparePairingAlert = (id, shadowRoot, pairingPayload) => __awaiter(void 0, void 0, void 0, function* () {\n  const getInfo = () => __awaiter(void 0, void 0, void 0, function* () {\n    return Pairing.getPairingInfo(pairingPayload, (_walletType, _wallet, keepOpen) => __awaiter(void 0, void 0, void 0, function* () {\n      if (keepOpen) {\n        return;\n      }\n\n      yield closeAlerts();\n    }), () => __awaiter(void 0, void 0, void 0, function* () {\n      switchPlatform();\n    }));\n  });\n\n  const info = yield getInfo();\n  const container = shadowRoot.getElementById(`pairing-container`);\n\n  if (!container) {\n    throw new Error('container not found');\n  }\n\n  const buttonListWrapper = document.createElement('span');\n  container.appendChild(buttonListWrapper);\n  info.buttons.forEach(button => __awaiter(void 0, void 0, void 0, function* () {\n    const randomId = yield generateGUID();\n    const titleEl = createSanitizedElement('div', ['beacon-list__title'], [], button.title);\n    const buttonEl = createSanitizedElement('button', ['beacon-modal__button', 'connect__btn'], [], button.text);\n    const linkEl = document.createElement('a');\n    linkEl.id = `button_${randomId}`;\n    linkEl.appendChild(titleEl);\n    linkEl.appendChild(buttonEl);\n    buttonListWrapper.appendChild(linkEl);\n    const shadowButtonEl = shadowRoot.getElementById(linkEl.id);\n\n    if (shadowButtonEl) {\n      shadowButtonEl.addEventListener('click', () => __awaiter(void 0, void 0, void 0, function* () {\n        button.clickHandler();\n      }));\n    }\n  }));\n\n  const showWallet = (listEl, type, wallet) => {\n    const altTag = `Open in ${wallet.name}`;\n    const walletKey = wallet.key;\n    const logoEl = wallet.logo ? createSanitizedElement('div', [], [], [createSanitizedElement('img', ['beacon-selection__img'], [['src', wallet.logo]], '')]) : createSVGElement(['beacon-selection__img', 'svg-inline--fa', 'fa-wallet', 'fa-w-16'], [['aria-hidden', 'true'], ['focusable', 'false'], ['data-prefix', 'fas'], ['data-icon', 'wallet'], ['role', 'img'], ['xmlns', 'http://www.w3.org/2000/svg'], ['viewBox', '0 0 512 512'], ['style', 'enable-background:new 0 0 512 512;'], ['xml:space', 'preserve']], [createSVGPathElement([['d', 'M376.2,181H152.9c-5.2,0-9.4-4.2-9.4-9.4s4.2-9.4,9.4-9.4h225c5.2,0,9.4-4.2,9.4-9.4c0-15.5-12.6-28.1-28.1-28.1H143.5c-20.7,0-37.5,16.8-37.5,37.5v187.5c0,20.7,16.8,37.5,37.5,37.5h232.7c16.4,0,29.8-12.6,29.8-28.1v-150C406,193.6,392.7,181,376.2,181z M349.8,302.9c-10.4,0-18.8-8.4-18.8-18.8s8.4-18.8,18.8-18.8s18.8,8.4,18.8,18.8S360.1,302.9,349.8,302.9z']])]);\n    const nameEl = createSanitizedElement('div', ['beacon-selection__name'], [], [createSanitizedElement('span', [], [], wallet.name), wallet.enabled ? undefined : createSanitizedElement('p', [], [], 'Not installed')]);\n    const linkEl = createSanitizedElement('a', ['beacon-selection__list', wallet.enabled ? '' : 'disabled'], [['tabindex', '0'], ['id', `wallet_${walletKey}`], ['alt', altTag], ['target', '_blank']], [nameEl, logoEl]);\n    const el = document.createElement('span');\n    el.appendChild(linkEl);\n    listEl.appendChild(el);\n    const walletEl = shadowRoot.getElementById(`wallet_${walletKey}`);\n\n    const completeHandler = event => __awaiter(void 0, void 0, void 0, function* () {\n      if (event && event.key !== 'Enter') {\n        return;\n      }\n\n      wallet.clickHandler();\n      const modalEl = shadowRoot.getElementById('beacon-modal__content');\n\n      if (modalEl && type !== WalletType.EXTENSION && type !== WalletType.IOS) {\n        removeAllChildren(modalEl);\n        modalEl.appendChild(createSanitizedElement('p', ['beacon-alert__title'], [], 'Establishing Connection..'));\n        modalEl.appendChild(createSanitizedElement('div', ['progress-line'], [['id', 'beacon-toast-loader']], ''));\n        modalEl.appendChild(createSanitizedElement('div', ['beacon--selected__container'], [], [...(wallet.logo ? [createSanitizedElement('img', ['beacon-selection__img'], [['src', wallet.logo]], ''), createSanitizedElement('img', ['beacon--selection__name__lg'], [], wallet.name)] : [])]));\n      }\n    });\n\n    if (walletEl) {\n      walletEl.addEventListener('click', () => completeHandler());\n      walletEl.addEventListener('keydown', completeHandler);\n    }\n  };\n\n  const listContainer = document.createElement('span');\n  container.appendChild(listContainer);\n\n  const showWalletLists = walletLists => {\n    removeAllChildren(listContainer);\n    walletLists.forEach(list => {\n      const listWrapperEl = document.createElement('div');\n      listWrapperEl.classList.add('beacon-list__wrapper');\n      listContainer.appendChild(listWrapperEl);\n      listWrapperEl.appendChild(createSanitizedElement('div', ['beacon-list__title'], [], list.title));\n      const listEl = document.createElement('span');\n      listWrapperEl.appendChild(listEl);\n      list.wallets.forEach(wallet => __awaiter(void 0, void 0, void 0, function* () {\n        showWallet(listEl, list.type, wallet);\n      }));\n    });\n  };\n\n  showWalletLists(info.walletLists); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  const messageFn = event => __awaiter(void 0, void 0, void 0, function* () {\n    if (event.data === 'extensionsUpdated') {\n      const newInfo = yield getInfo();\n      showWalletLists(newInfo.walletLists);\n    }\n  }); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n  let closeFn; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n  closeFn = event => {\n    if (event.data === `closeAlert-${id}`) {\n      windowRef.removeEventListener('message', messageFn);\n      windowRef.removeEventListener('message', closeFn);\n    }\n  };\n\n  windowRef.addEventListener('message', messageFn);\n  windowRef.addEventListener('message', closeFn);\n  const qr = shadowRoot.getElementById(`beacon--qr__container`);\n  const copyButton = shadowRoot.getElementById(`beacon--qr__copy`);\n  const titleEl = shadowRoot.getElementById(`beacon-title`);\n  const platform = isAndroid(window) ? 'android' : isIOS(window) ? 'ios' : 'desktop';\n  const mainText = shadowRoot.getElementById(`beacon-main-text`);\n  const walletList = shadowRoot.getElementById(`pairing-container`);\n  const switchButton = shadowRoot.getElementById(`beacon--switch__container`); // if (mainText && walletList && switchButton && copyButton && qr && titleEl) {\n\n  const clipboardFn = () => __awaiter(void 0, void 0, void 0, function* () {\n    const code = pairingPayload ? yield serializer.serialize(yield pairingPayload.p2pSyncCode()) : '';\n    navigator.clipboard.writeText(code).then(() => {\n      if (copyButton) {\n        copyButton.innerText = 'Copied';\n      }\n\n      logger.log('Copying to clipboard was successful!');\n    }, err => {\n      logger.error('Could not copy text to clipboard: ', err);\n    });\n  });\n\n  let qrShown = false;\n\n  const showPlatform = type => __awaiter(void 0, void 0, void 0, function* () {\n    const platformSwitch = shadowRoot.getElementById(`beacon-switch`);\n\n    if (platformSwitch) {\n      platformSwitch.innerText = type === 'none' ? 'Pair wallet on same device' : 'Pair wallet on another device';\n    }\n\n    if (mainText && walletList && switchButton && copyButton && qr && titleEl) {\n      mainText.style.display = 'none';\n      titleEl.style.textAlign = 'center';\n      walletList.style.display = 'none';\n      switchButton.style.display = 'initial';\n\n      switch (type) {\n        case 'ios':\n          walletList.style.display = 'initial';\n          break;\n\n        case 'android':\n          walletList.style.display = 'initial';\n          break;\n\n        case 'desktop':\n          walletList.style.display = 'initial';\n          titleEl.style.textAlign = 'left';\n          mainText.style.display = 'none';\n          switchButton.style.display = 'initial';\n          break;\n\n        default:\n          if (!qrShown) {\n            // If we have previously triggered the load, do not load it again (this can lead to multiple QRs being added if \"pairingPayload.p2pSyncCode()\" is slow)\n            qrShown = true;\n            const code = yield serializer.serialize(yield pairingPayload.p2pSyncCode());\n            const uri = getTzip10Link('tezos://', code);\n            const qrSVG = getQrData(uri, 'svg');\n            const qrString = qrSVG.replace('<svg', `<svg class=\"beacon-alert__image\"`);\n            qr.insertAdjacentHTML('afterbegin', qrString);\n\n            if (copyButton) {\n              copyButton.addEventListener('click', clipboardFn);\n            }\n\n            if (qr) {\n              qr.addEventListener('click', clipboardFn);\n            }\n          } // QR code\n\n\n          mainText.style.display = 'initial';\n      }\n    }\n  });\n\n  let showQr = false;\n\n  const switchPlatform = () => {\n    showPlatform(showQr ? 'none' : platform);\n    showQr = !showQr;\n  };\n\n  switchPlatform();\n  {\n    const platformSwitch = shadowRoot.getElementById(`beacon-switch`);\n\n    if (platformSwitch) {\n      platformSwitch.addEventListener('click', switchPlatform);\n    }\n  }\n});","map":{"version":3,"mappings":"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","names":["Serializer","Logger","windowRef","generateGUID","isAndroid","isIOS","getQrData","getTzip10Link","closeAlerts","Pairing","WalletType","createSanitizedElement","createSVGElement","createSVGPathElement","removeAllChildren","logger","serializer","preparePairingAlert","id","shadowRoot","pairingPayload","__awaiter","getInfo","getPairingInfo","_walletType","_wallet","keepOpen","switchPlatform","info","container","getElementById","Error","buttonListWrapper","document","createElement","appendChild","buttons","forEach","button","randomId","titleEl","title","buttonEl","text","linkEl","shadowButtonEl","addEventListener","clickHandler","showWallet","listEl","type","wallet","altTag","name","walletKey","key","logoEl","logo","nameEl","enabled","undefined","el","walletEl","completeHandler","event","modalEl","EXTENSION","IOS","listContainer","showWalletLists","walletLists","list","listWrapperEl","classList","add","wallets","messageFn","data","newInfo","closeFn","removeEventListener","qr","copyButton","platform","window","mainText","walletList","switchButton","clipboardFn","code","serialize","p2pSyncCode","navigator","clipboard","writeText","then","innerText","log","err","error","qrShown","showPlatform","platformSwitch","style","display","textAlign","uri","qrSVG","qrString","replace","insertAdjacentHTML","showQr"],"sourceRoot":"","sources":["../../../../src/ui/alert/PairingAlert.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}